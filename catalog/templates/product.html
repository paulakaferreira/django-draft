{% extends 'base.html' %}

{% load bootstrap5 %}

{% block content %}

<div class="col-lg-12 mx-auto p-4 py-md-5">

    <h1 class="my-3">{% block h1 %}{{ product.name }}{% endblock %}</h1>

    {% if product.is_available is True %}
    <p style="color:green; font-style: italic;">This product is available !</p>
    {% else %}
    <p style="color:red; font-style: italic;">This product is not available right now.</p>
    {% endif %}

    <p>
        ${{ product.price }}
        {% if product.is_available is True %}
        <a class="btn btn-primary btn-sm" href="{% url 'cart:add_to_cart' product.id %}">Add to cart</a>
        {% else %}
        <button class="btn btn-primary btn-sm" href="{% url 'cart:add_to_cart' product.id %}" disabled>Add to cart</button>
        {% endif %}
    </p>

    {% if product.image %}
    <img style="max-height: 300px;" src="{{ product.image.url }}" alt="{{ product.name }}">
    {% else %}
    <img src="/media/product_images/placeholder.png" style="max-height: 300px;" alt="{{ product.name }}">
    {% endif %}

    <h3 class="pt-4">Description</h3>
    <p>{{ product.description }}</p>

    <h3 class="pt-4">Customer reviews</h3>
    {% if product.reviews.all %}
    <!-- TODO : add reviews -->
    <p>(no content yet)</p>
    {% else %}
    <p>
        No reviews yet.<br/>
        Bought the product yourself ? Give us your opinion below !
    </p>
    {% endif %}

    <div class="container">
        <form method="post" action="{% url 'catalog:add_review' slug=product.slug %}">
            {% csrf_token %}
            {% bootstrap_form review_form %}
            <div class="text-end my-3">
                {% bootstrap_button 'Submit' button_type='submit' extra_classes='end-text' %}
            </div>
        </form>
    </div>

</div>

{% endblock %}